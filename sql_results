create view results.automl_results
            (job_id, fold_id, dataset, learner, learner_params, evaluation_time, n_classes, n_features,
             flip_y, noise, imbalance, gen_type, f1score, accuracy, mathewscorrelationcoefficient,  mcmcbayesmi,
             mcmcloglossbayesmi, mcmcpcsoftmaxbayesmi, mcmcsoftmaxbayesmi, midpointmi, loglossmi,
             loglossmiisotonicregression, loglossmiplattscaling, loglossmibetacalibration, loglossmitemperaturescaling,
             loglossmihistogrambinning, pcsoftmaxmi, pcsoftmaxmiisotonicregression, pcsoftmaxmiplattscaling,
             pcsoftmaxmibetacalibration, pcsoftmaxmitemperaturescaling, pcsoftmaxmihistogrambinning)
as
SELECT jobs.job_id,
       jobs.fold_id,
       jobs.dataset,
       jobs.learner,
       jobs.learner_params,
       jobs.evaluation_time,
       (jobs.dataset_params ->> 'n_classes'::text)::integer       AS n_classes,
       (jobs.dataset_params ->> 'n_features'::text)::integer      AS n_features,
       (jobs.dataset_params ->> 'flip_y'::text)::double precision AS flip_y,
       (jobs.dataset_params ->> 'noise'::text)::double precision AS noise,
       (jobs.dataset_params ->> 'imbalance'::text)::double precision AS imbalance,
       (jobs.dataset_params ->> 'gen_type'::text)::text AS gen_type,
       results.f1score,
       results.accuracy,
       results.mathewscorrelationcoefficient,
       results.mcmcbayesmi,
       results.mcmcloglossbayesmi,
       results.mcmcpcsoftmaxbayesmi,
       results.mcmcsoftmaxbayesmi,
       results.midpointmi,
       results.loglossmi,
       results.loglossmiisotonicregression,
       results.loglossmiplattscaling,
       results.loglossmibetacalibration,
       results.loglossmitemperaturescaling,
       results.loglossmihistogrambinning,
       results.pcsoftmaxmi,
       results.pcsoftmaxmiisotonicregression,
       results.pcsoftmaxmiplattscaling,
       results.pcsoftmaxmibetacalibration,
       results.pcsoftmaxmitemperaturescaling,
       results.pcsoftmaxmihistogrambinning
FROM results.automl results JOIN automl.avail_jobs jobs USING (job_id);

alter table results.automl_results owner to autoscaadmin;

create view results.mutual_information_results
            (job_id, fold_id, dataset, learner, learner_params, evaluation_time, n_classes, n_features,
             flip_y, noise, imbalance, gen_type, mcmcbayesmi, mcmcloglossbayesmi, mcmcpcsoftmaxbayesmi,
             mcmcsoftmaxbayesmi, estimatedmutualinformation)
as
SELECT jobs.job_id,
       jobs.fold_id,
       jobs.dataset,
       jobs.learner,
       jobs.learner_params,
       jobs.evaluation_time,
       (jobs.dataset_params ->> 'n_classes'::text)::integer       AS n_classes,
       (jobs.dataset_params ->> 'n_features'::text)::integer      AS n_features,
       (jobs.dataset_params ->> 'flip_y'::text)::double precision AS flip_y,
       (jobs.dataset_params ->> 'noise'::text)::double precision AS noise,
       (jobs.dataset_params ->> 'imbalance'::text)::double precision AS imbalance,
       (jobs.dataset_params ->> 'gen_type'::text)::text AS gen_type,
       results.mcmcbayesmi,
       results.mcmcloglossbayesmi,
       results.mcmcpcsoftmaxbayesmi,
       results.mcmcsoftmaxbayesmi,
       results.estimatedmutualinformation
FROM results.mutual_information results JOIN mutual_information.avail_jobs jobs USING (job_id);

alter table results.mutual_information_results owner to autoscaadmin;

